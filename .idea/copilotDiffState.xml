<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/public/index.php">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/index.php" />
              <option name="originalContent" value="&lt;?php&#10;declare(strict_types=1);&#10;&#10;$xcdBase = 'https://xkcd.com';&#10;$timeout = 5;&#10;&#10;function fetchXkcdComic(int $comicNumber, string $baseUrl, int $timeout): ?array {&#10;    $url = $baseUrl . '/' . $comicNumber . '/info.0.json';&#10;    $ch = curl_init($url);&#10;    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);&#10;    curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);&#10;    $response = curl_exec($ch);&#10;    if (curl_errno($ch)) {&#10;        curl_close($ch);&#10;        return null;&#10;    }&#10;    curl_close($ch);&#10;    return json_decode($response, true);&#10;}&#10;&#10;function htmlError(string $msg): string {&#10;    $safe = htmlspecialchars($msg, ENT_QUOTES, 'UTF-8');&#10;    return &lt;&lt;&lt;HTML&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Error&lt;/title&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;h1&gt;Something went wrong&lt;/h1&gt;&#10;    &lt;p&gt;{$safe}&lt;/p&gt;&#10;    &lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;Go back to the main page&lt;/a&gt;&lt;/p&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;HTML;&#10;}&#10;&#10;//Obtener comic&#10;$comic = fetchXkcdComic(null, $xcdBase, $timeout);&#10;//Render&#10;$num = (int)($comic['num'] ?? 0);&#10;$title = htmlspecialchars($comic['title'] ?? 'Unknown', ENT_QUOTES, 'UTF-8');&#10;$imgUrl = htmlspecialchars($comic['img'] ?? '', ENT_QUOTES, 'UTF-8');&#10;$altText = htmlspecialchars($comic['alt'] ?? '', ENT_QUOTES, 'UTF-8');&#10;$year  = (int)($comic['year']  ?? 0);&#10;$month = (int)($comic['month'] ?? 0);&#10;$day   = (int)($comic['day']   ?? 0);&#10;&#10;if ($year &gt;= 1 &amp;&amp; checkdate($month ?: 1, $day ?: 1, $year)) {&#10;    // '!' resetea hora a 00:00:00 y evita heredar la hora actual&#10;    $dt = DateTimeImmutable::createFromFormat('!Y-n-j', &quot;{$year}-{$month}-{$day}&quot;);&#10;    // Si por alguna raz칩n fallara el parseo, caemos a un sprintf seguro&#10;    $date = $dt ? $dt-&gt;format('Y-m-d')&#10;        : sprintf('%04d-%02d-%02d', $year, max(1,$month), max(1,$day));&#10;} else {&#10;    // Fallback si faltan datos o la fecha no es v치lida&#10;    $date = '0000-01-01';&#10;}&#10;?&gt;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;&lt;?php echo $title; ?&gt; - XKCD Comic&lt;/title&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;wrap&quot; &gt;&#10;        &lt;h1&gt;&lt;?php echo $title; ?&gt;&lt;/h1&gt;&#10;        &lt;div class=&quot;comic&quot;&gt;&#10;            &lt;img src=&quot;&lt;?php echo $imgUrl; ?&gt;&quot; alt=&quot;&lt;?php echo $altText; ?&gt;&quot; title=&quot;&lt;?php echo $altText; ?&gt;&quot;&gt;&#10;        &lt;/div&gt;&#10;        &lt;p&gt;Comic Number: &lt;?php echo $num; ?&gt;&lt;/p&gt;&#10;        &lt;p&gt;Date: &lt;?php echo $date; ?&gt;&lt;/p&gt;&#10;        &lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;Load another comic&lt;/a&gt;&lt;/p&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;&#10;" />
              <option name="updatedContent" value="&lt;?php&#10;declare(strict_types=1);&#10;&#10;$xcdBase = 'https://xkcd.com';&#10;$timeout = 5;&#10;&#10;function fetchXkcdComic(?int $comicNumber, string $baseUrl, int $timeout): ?array {&#10;    $url = $baseUrl;&#10;    if ($comicNumber !== null) {&#10;        $url .= '/' . $comicNumber;&#10;    }&#10;    $url .= '/info.0.json';&#10;    $ch = curl_init($url);&#10;    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);&#10;    curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);&#10;    $response = curl_exec($ch);&#10;    if (curl_errno($ch)) {&#10;        curl_close($ch);&#10;        return null;&#10;    }&#10;    curl_close($ch);&#10;    return json_decode($response, true);&#10;}&#10;&#10;function htmlError(string $msg): string {&#10;    $safe = htmlspecialchars($msg, ENT_QUOTES, 'UTF-8');&#10;    return &lt;&lt;&lt;HTML&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Error&lt;/title&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;h1&gt;Something went wrong&lt;/h1&gt;&#10;    &lt;p&gt;{$safe}&lt;/p&gt;&#10;    &lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;Go back to the main page&lt;/a&gt;&lt;/p&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;HTML;&#10;}&#10;&#10;//Obtener comic&#10;$comic = fetchXkcdComic(null, $xcdBase, $timeout);&#10;//Render&#10;$num = (int)($comic['num'] ?? 0);&#10;$title = htmlspecialchars($comic['title'] ?? 'Unknown', ENT_QUOTES, 'UTF-8');&#10;$imgUrl = htmlspecialchars($comic['img'] ?? '', ENT_QUOTES, 'UTF-8');&#10;$altText = htmlspecialchars($comic['alt'] ?? '', ENT_QUOTES, 'UTF-8');&#10;$year  = (int)($comic['year']  ?? 0);&#10;$month = (int)($comic['month'] ?? 0);&#10;$day   = (int)($comic['day']   ?? 0);&#10;&#10;if ($year &gt;= 1 &amp;&amp; checkdate($month ?: 1, $day ?: 1, $year)) {&#10;    // '!' resetea hora a 00:00:00 y evita heredar la hora actual&#10;    $dt = DateTimeImmutable::createFromFormat('!Y-n-j', &quot;{$year}-{$month}-{$day}&quot;);&#10;    // Si por alguna raz칩n fallara el parseo, caemos a un sprintf seguro&#10;    $date = $dt ? $dt-&gt;format('Y-m-d')&#10;        : sprintf('%04d-%02d-%02d', $year, max(1,$month), max(1,$day));&#10;} else {&#10;    // Fallback si faltan datos o la fecha no es v치lida&#10;    $date = '0000-01-01';&#10;}&#10;?&gt;&#10;&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;&lt;?php echo $title; ?&gt; - XKCD Comic&lt;/title&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;wrap&quot; &gt;&#10;        &lt;h1&gt;&lt;?php echo $title; ?&gt;&lt;/h1&gt;&#10;        &lt;div class=&quot;comic&quot;&gt;&#10;            &lt;img src=&quot;&lt;?php echo $imgUrl; ?&gt;&quot; alt=&quot;&lt;?php echo $altText; ?&gt;&quot; title=&quot;&lt;?php echo $altText; ?&gt;&quot;&gt;&#10;        &lt;/div&gt;&#10;        &lt;p&gt;Comic Number: &lt;?php echo $num; ?&gt;&lt;/p&gt;&#10;        &lt;p&gt;Date: &lt;?php echo $date; ?&gt;&lt;/p&gt;&#10;        &lt;p&gt;&lt;a href=&quot;index.php&quot;&gt;Load another comic&lt;/a&gt;&lt;/p&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>